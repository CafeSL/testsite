<!DOCTYPE html>
<html>
<link rel="manifest" href="manifest.json">

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="application-name" content="Cafe SL">
<meta name="apple-mobile-web-app-title" content="Cafe SL">
<meta name="theme-color" content="#00000">
<meta name="msapplication-navbutton-color" content="#00000">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="msapplication-starturl" content="/">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="icon" type="image.png" sizes="1080x1080" href="favicon.png">
<link rel="apple-touch-icon" type="image.png" sizes="1080x1080" href="favicon.png">
<title>CafeSL - Home</title>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<link rel='stylesheet' href='https://www.w3schools.com/w3css/4/w3.css'>
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Amatic+SC'>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>
         <script src='https://smtpjs.com/v3/smtp.js'></script> 
<style>
body, html {height: 100%}
body,h1,h2,h3,h4,h5,h6 {font-family: 'Amatic SC', sans-serif}
.menu {display: none}
body, html {height: 100%}
.body {
  background-image: url('pizza.jpg');
  min-height: 100vh;
  min-width:100vh 
  background-position: center;
  background-size: stretch;
}


</style>
<body>

<div class="bgimg w3-display-container w3-text-white">
  <div class="w3-display-middle w3-jumbo">
    <p>Cafe<br>SL</p>
  </div>
  <div class="w3-display-topleft w3-container w3-xlarge">
-    <p><button onclick="document.getElementById('menu').style.display='block'" class="w3-button w3-black">menu</button></p>
    <p><button onclick="document.getElementById('contact').style.display='block'" class="w3-button w3-black">contact</button></p>
  </div>
  <div class="w3-display-bottomleft w3-container">

    
    <p class="w3-small">powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
  </div>
</div>

<!-- Menu Modal -->
<div id="menu" class="w3-modal">
  <div class="w3-modal-content w3-animate-zoom">
    <div class="w3-container w3-black w3-display-container">
      <span onclick="document.getElementById('menu').style.display='none'" class="w3-button w3-display-topright w3-large">x</span>
      <h1>Starters</h1>
    </div>
    <div class="w3-container">
      <h5>Tomato Soup <b>$2.50</b></h5>
      <h5>Chicken Salad <b>$3.50</b></h5>
      <h5>Bread and Butter <b>$1.00</b></h5>
    </div>
    <div class="w3-container w3-black">
      <h1>Main Courses</h1>
    </div>
    <div class="w3-container">
      <h5>Grilled Fish and Potatoes <b>$8.50</b></h5>
      <h5>Italian Pizza <b>$5.50</b></h5>
      <h5>Veggie Pasta <b>$4.00</b></h5>
      <h5>Chicken and Potatoes <b>$6.50</b></h5>
      <h5>Deluxe Burger <b>$5.00</b></h5>
    </div>
    <div class="w3-container w3-black">
      <h1>Desserts</h1>
    </div>
    <div class="w3-container">
      <h5>Fruit Salad <b>$2.50</b></h5>
      <h5>Ice cream <b>$2.00</b></h5>
      <h5>Chocolate Cake <b>$4.00</b></h5>
      <h5>Cheese <b>$5.50</b></h5>
    </div>
  </div>
</div>

<!-- Contact Modal -->
<div id="contact" class="w3-modal">
  <div class="w3-modal-content w3-animate-zoom">
    <div class="w3-container w3-black">
      <span onclick="document.getElementById('contact').style.display='none'" class="w3-button w3-display-topright w3-large">x</span>
      <h1>Contact</h1>
    </div>
    <div class="w3-container">
      <p>Reserve a table, ask for today's special or just send us a message:</p>
      <form action="/action_page.php" target="_blank">
        <p><input class="w3-input w3-padding-16 w3-border" type="text" placeholder="Name" required name="Name"></p>
        <p><input class="w3-input w3-padding-16 w3-border" type="number" placeholder="How many people" required name="People"></p>
        <p><input class="w3-input w3-padding-16 w3-border" type="datetime-local" placeholder="Date and time" required name="date" value="2020-11-16T20:00"></p>
        <p><input class="w3-input w3-padding-16 w3-border" type="text" placeholder="Message \ Special requirements" required name="Message"></p>
        <p><button class="w3-button" type="submit">SEND MESSAGE</button></p>
      </form>
    </div>
  </div>
</div>



<script>
</script>
<script>
  class MessageBox {
  constructor(id, option) {
    this.id = id;
    this.option = option;
  }
  
  show(msg, label = 'CLOSE', callback = null) {
    if (this.id === null || typeof this.id === 'undefined') {
      // if the ID is not set or if the ID is undefined
      
      throw("Please set the 'ID' of the message box container.");
    }
    
    if (msg === '' || typeof msg === 'undefined' || msg === null) {
      // If the 'msg' parameter is not set, throw an error
      
      throw ("The 'msg' parameter is empty.");
    }
    
    if (typeof label === 'undefined' || label === null) {
      // Of the label is undefined, or if it is null
      
      label = 'CLOSE';
    }
    
    let option = this.option;

    let msgboxArea = document.querySelector(this.id);
    let msgboxBox = document.createElement('DIV');
    let msgboxContent = document.createElement('DIV');
    let msgboxClose = document.createElement('A');
    
    if (msgboxArea === null) {
      // If there is no Message Box container found.
      
      throw 'The Message Box container is not found.';
    }

    // Content area of the message box
    msgboxContent.classList.add('msgbox-content');
    msgboxContent.innerText = msg;
    
    // Close burtton of the message box
    msgboxClose.classList.add('msgbox-close');
    msgboxClose.setAttribute('href', '#');https://hook.integromat.com/uyees8m3eawkgua82knee8dgm6gkioid?name=
    msgboxClose.innerText = label;
    
    // Container of the Message Box element
    msgboxBox.classList.add('msgbox-box');
    msgboxBox.appendChild(msgboxContent);

    if (option.hideCloseButton === false
        || typeof option.hideCloseButton === 'undefined') {
      // If the hideCloseButton flag is false, or if it is undefined
      
      // Append the close button to the container
      msgboxBox.appendChild(msgboxClose);
    }

    msgboxArea.appendChild(msgboxBox);

    msgboxClose.addEventListener('click', (evt) => {
      evt.preventDefault();
      
      if (msgboxBox.classList.contains('msgbox-box-hide')) {
        // If the message box already have 'msgbox-box-hide' class
        // This is to avoid the appearance of exception if the close
        // button is clicked multiple times or clicked while hiding.
        
        return;
      }

      this.hide(msgboxBox, callback);
    });

    if (option.closeTime > 0) {
      this.msgboxTimeout = setTimeout(() => {
        this.hide(msgboxBox, callback);
      }, option.closeTime);
    }
  }
  
  hide(msgboxBox, callback) {
    if (msgboxBox !== null) {
      // If the Message Box is not yet closed

      msgboxBox.classList.add('msgbox-box-hide');
    }
    
    msgboxBox.addEventListener('transitionend', () => {
      if (msgboxBox !== null) {
        // If the Message Box is not yet closed

        msgboxBox.parentNode.removeChild(msgboxBox);

        clearTimeout(this.msgboxTimeout);
        
        if (callback !== null) {
          // If the callback parameter is not null
          callback();
        }
      }
    });
  }
}

let msgboxShowMessage = document.querySelector('#msgboxShowMessage');
let msgboxHiddenClose = document.querySelector('#msgboxHiddenClose');

// Creation of Message Box class, and the sample usage
let msgboxbox = new MessageBox('#msgbox-area', {
  closeTime: 10000,
  hideCloseButton: false
});
let msgboxboxPersistent = new MessageBox('#msgbox-area', {
  closeTime: 0
});
let msgboxNoClose = new MessageBox('#msgbox-area', {
  closeTime: 5000,
  hideCloseButton: true
});
var ordercsv = ''
    const order = []
    const orderprices = []
   const prices = [12.50,15.50,17.00,16.50,20.00,21.50,13.50,14.50,11.00,25.50,5.50,8.50,9.50,10.50,5.50,2.00,2.00,2.00,2.00,2.00,2.00,2.00,2.00,2.00,2.00,2.00,2.00]
    const menu = ['Margherita','Formaggio','Chicken','Pinapple\u2019O\u2019Clock','Meat Town','Parma','Lasagna','Ravioli','Spaghetti Classica','Seafood Pasta','This Season\u2019s Soup','Bruschetta','Garlic Bread','Tomozzarella','Chips','Coke','Iced Tea','Coke','Iced Tea','Iced Coffee','Ginger Beer','Lemon, Lime & Bitters','Lemonade','coffee','Tea','3','4']
function openMenu(evt, menuName) {
  var i, x, tablinks;
  x = document.getElementsByClassName('menu');
  for (i = 0; i < x.length; i++) {
     x[i].style.display = 'none';
  }
  tablinks = document.getElementsByClassName('tablink');
  for (i = 0; i < x.length; i++) {
     tablinks[i].className = tablinks[i].className.replace(' w3-red', '');
  }
  document.getElementById(menuName).style.display = 'block';
  evt.currentTarget.firstElementChild.className += ' w3-red';
}
document.getElementById('myLink').click;
function addtoorder(id) {
  var items = document.getElementById('ORDER');
    console.log('GOT ELEMENT')
    console.log('CREATED')
    order.push(menu[id] + ' $' + prices[id])
    console.log('Pushed')
    orderprices.push(prices[id])
    console.log('Pushed')
    //msgboxNoClose.show('Added ' + menu[id] + ' To Your Order\nTo Find Your Order, scroll down.');
    console.log('MSGBOX')
    const mnuitm = document.createElement('li')
    mnuitm.id = order.length - 1
    mnuitmlastid = mnuitm.id
    console.log('SET ID')
    mnuitm.innerHTML = menu[id] + ' $' + prices[id] + "<button onclick='remove(" + mnuitmlastid + ")' class='w3-btn w3-round-xlarge w3-large w3-red w3-right'>&times;</span>"
      console.log('SET INNERHTML')
    items.appendChild(mnuitm);
    console.log('Appended')
    console.log(mnuitm)
      setTimeout(showorder(), 0500)
} 

function showorder(){
    //calculate total price
    var total = 0.00
    for (let i = 0; i < orderprices.length; i++) {
        var total = total + orderprices[i]
    }
    ordercsv = order.join(',')
    var tot = document.getElementById('total')
    tot.innerHTML = '$' + total
    
}

function remove(id){
  order.splice(id)
  console.log('Spliced')
  console.log(id)
  document.getElementById(String(id)).style.display = 'none'
  console.log('Hidden')
  //msgboxNoClose.show('Removed ' + menu[id] + ' from your order.')
  console.log('Notified')
         total = total - orderprices[id]
         showorder()
}

function sendorder(){
         showorder()
  name = prompt('Placing Order\nEnter Your Name')
  email = prompt('Placing Order\nEnter Your Email')
  date = new Date()
  c = confirm('Placing Order\nAre you sure that you want to place the order of: ' + ordercsv + ' With this name: ' + name + ' And this Email: ' + email + '?')
  if (c){
    
                  

           Email.send({
    SecureToken: "3a23d3e3-1b37-46ab-be28-c43357366842",
    To : email,
    From : "cslweborder@outlook.com",
    Subject : 'Your Order',
    Body : '<center><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Amatic+SC"><style>body,h1,h2,h3,h4,h5,h6 {font-family: "Amatic SC", sans-serif}</style><p><img src="https://github.com/CafeSL/cafesl.github.io/blob/main/favicon.png?raw=true" alt="favicon" width="50px"></p> <h1>Your Order Is On Its Way!</h1> <h4>Dear, ' + name + ' your order is on it\'s way!</h4> <h4>Date And Time Placed:' + date + '</h4> <h4>Your Order:</h4> <h4>' + ordercsv + ''
});
           linky = "https://hook.integromat.com/uyees8m3eawkgua82knee8dgm6gkioid?name="+name+"&ordercsv="+ordercsv+"&email="+email+"&cost="+total.innerHTML
    alert('Order Placed');
document.write('<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Amatic+SC"><h1 style="font-family: Amatic SC">DO NOT CLOSE THIS WINDOW! IT IS NEEDED TO CONFIRM YOUR ORDER</h1><img  src="'+ linky + '">')
          }
  };
    
  


        
</script>

</body>
</html>
